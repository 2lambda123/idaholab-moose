reset

# Parameters: Dimensions in mm
#{W = 50}
#{a = 26.43}


# To avoid stress concentration ahead of crack
#{h = 1.2}
#{hex_dimension = 1.0}
#{B = 20*hex_dimension}
#{hex_dimension_sm = 0.9} # small
#{offset_x = 2.001} # small
#{offset_y = 0.866025 + 0.001} # small

#{value = 0.02}
#{interval_fine = 10.0}
#{interval_coarse = 10.0}

# First HEXAGON
create vertex {hex_dimension} 0 0
create vertex {0.5*hex_dimension} {0.866025*hex_dimension} 0
create vertex {-0.5*hex_dimension} {0.866025*hex_dimension} 0
create vertex {-1.0*hex_dimension} 0 0
create vertex {-0.5*hex_dimension} {-0.866025*hex_dimension} 0
create vertex {0.5*hex_dimension} {-0.866025*hex_dimension} 0

# Create hexagon surface
create surface vertex 1,2,3,4,5,6

# Additional surface to subtract the geometry
create vertex {hex_dimension_sm} 0 0
create vertex {0.5*hex_dimension_sm} {0.866025*hex_dimension_sm} 0
create vertex {-0.5*hex_dimension_sm} {0.866025*hex_dimension_sm} 0
create vertex {-1.0*hex_dimension_sm} 0 0
create vertex {-0.5*hex_dimension_sm} {-0.866025*hex_dimension_sm} 0
create vertex {0.5*hex_dimension_sm} {-0.866025*hex_dimension_sm} 0
create surface vertex 7,8,9,10,11,12

subtract 2 from 1

#
sweep surface 3 vector 0 0 1  distance {B}
#

surface 3 interval 3
curve 20 21 23 25 27 29 interval 10
mesh volume 1

# Pinning BCs
nodeset 1001 vertex 1 4 14 17 # 10

# Sidesets for loading
sideset 3 surface 3
sideset 16 surface 16

# Pressure BCs
sideset 4 surface 4

block 1 volume 1

block 1 elem QUAD4


export mesh "/Users/marta3/Repositories/projects/moose/modules/tensor_mechanics/test/tests/cross_section_deflection/duct_alt.e" overwrite
