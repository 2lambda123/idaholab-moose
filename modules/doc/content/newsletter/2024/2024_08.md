# MOOSE Newsletter (August 2024)

## OpenMPI added to Conda MOOSE Packages alongside MPICH

You may now specify either OpenMPI or the MPICH MPI wrapper when installing MOOSE Conda packages by appending `openmpi` or `mpich` to the `conda create/install` line:

```bash
conda create -n moose moose-dev openmpi||mpich
```

*Note: OpenMPI, being a new package addition, is a bit under-tested at the moment. It is recommended for use only by experienced users and developers!*

## MOOSE Improvements

### Warnings and warning tallies now available for SolutionInvalidInterface

[SolutionInvalidInterface.md] now offers the option to create warnings that are tallied during a simulation,
similar to the `solutionInvalid`-cases, but do not cause the solution to be rejected. Knowing the number of instances
that a warning was triggered is helpful for the modeler to decide manually whether the solution is acceptable.
These warnings are created using the `flagSolutionWarning` routine.

### Added fluid properties class for a two-phase fluid mixed with a non-condensable gas

The [TwoPhaseNCGPartialPressureFluidProperties.md] class was added, which derives
from `TwoPhaseNCGFluidProperties`, takes any `TwoPhaseFluidProperties` and
`SinglePhaseFluidProperties` as input, and creates an [IdealRealGasMixtureFluidProperties.md],
which computes gas mixture properties using a ideal partial pressure mixing
assumption.

This class is suitable for two-phase flow applications that may feature a non-condensable
gas. Such a flow model is planned for one-dimensional components in the
[Thermal Hydraulics module](modules/thermal_hydraulics/index.md) later this year.

## libMesh-level Changes

### `2024.08.17` Update

- Don't leak temporary Netgen `LDFLAGS` into `libmesh_LDFLAGS`.
- Include `<memory>` in `getpot.h` for more compiler compatibility.
- Implemented an improved `ASPECT_RATIO` quality metric for Quad elements.
- Added `Quad::quality(WARP)` implementation.
- Added unit tests for mesh smoothers.
- Fixed `ReplicatedMesh(DistributedMesh &)` construction.
- Report a more useful error message when asked to tetrahedralize a broken boundary.
- Add `Elem::edges_adjacent_to_node()` API
- Allow all Petsc matrix types to proceed from a common base class.
- Call netgen only on rank 0, then broadcast, for better reliability when tetrahedralizing in parallel.
- Add generic `Elem::quality(MIN,MAX_DIHEDRAL_ANGLE)` implementation.
- Close solution before zeroing for eigen systems.
- Add matrix iterator APIs to match vector iterator APIs.
- Fixes for compilations using single/triple/quadruple precision
- Netgen handling for unprepared inputs, non-contained holes

## PETSc-level Changes

### PETSc updated to 3.21.4

The `moose-petsc` package has been updated alongside the MOOSE repository submodule to version 3.21.4.
Consequently, the `moose-dev` conda environment was updated to version `2024.08.05`. All `moose-dev`
packages versioned after this date should contain PETSc 3.21.4. To obtain a newer version of the MOOSE
development packages, please follow our [getting started instructions](getting_started/index.md)
and create a new MOOSE conda environment. Alternatively, one may also attempt an update of their
current conda environment by performing the following commands, assuming that your development
environment is named `moose`:

```bash
conda activate moose
conda update moose-dev
```

## Bug Fixes and Minor Enhancements

- The [Terminator.md] can now output messages without failing the time step or returning an error,
  with its new 'NONE' option to the [!param](/UserObjects/Terminator/fail_mode) parameter.
- `VectorNeumannBC` was renamed to [DirectionalNeumannBC.md] for clarity.
- `MeshExtruderGenerator` was deprecated to prepare for its removal, as the [AdvancedExtruderGenerator.md]
  offers all its functionalities and more.
- `MaterialVectorPostprocessor` was renamed to [ElementMaterialSampler.md] to follow the naming convention
  used for the other vectorpostprocessor sampler objects.
- [TransientMultiApp.md] now always restores by default at the end of fixed point iterations. Not restoring
  was an optimization that is not valid if there are stateful properties or, generally, quantities computed on
  `TIMESTEP_BEGIN`.
