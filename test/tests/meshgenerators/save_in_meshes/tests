[Tests]
  design = 'MeshGenerator.md'
  issues = '#23618'
  [save_in_meshes_output]
    requirement = 'The system shall save intermediate meshes besides the final mesh file so that other objects can access it'

    [REPLICATED]
        type = 'Exodiff'
        input = 'save_in_meshes.i'
        exodiff = 'left_block_in.e'
        cli_args = "Mesh/A/save_with_name='left_block' "
        recover = false
        mesh_mode = REPLICATED

        detail = 'Output only the A mesh block in a seperate mesh file'
    []
    [NEMESIS]
      type = 'Exodiff'
      input = 'save_in_meshes.i'
      exodiff = 'left_block_in.e.2.0 left_block_in.e.2.1'
      cli_args = "Mesh/A/save_with_name='left_block' Mesh/parallel_type=distributed UserObjects/test/nemesis=true"
      recover = false
      mesh_mode = 'DISTRIBUTED'
      min_parallel = 2
      max_parallel = 2

      detail = 'Output only the A mesh block in a seperate mesh file in distributed mesh mode.'
    []
  []
  [save_in_name_error]
    requirement = 'The system shall error out when the user-defined mesh name is not allowed'

    [repeat_save_in_name]
      type = 'RunException'
      input = 'save_in_meshes.i'
      cli_args = "Mesh/A/save_with_name='A' Mesh/B/save_with_name='A' "
      expect_err = "The save with name 'A' has already been used"

      detail = 'Each save in mesh needs to have a unique name'
    []

    [save_in_name_as_main]
      type = 'RunException'
      input = 'save_in_meshes.i'
      cli_args = "Mesh/A/save_with_name='main' "
      expect_err = "The user-defined mesh name: 'main' has already been used by default mesh"

      detail = "The save in mesh can not used the MOOSE default mesh name 'main'."
    []

    [save_in_name_for_final_mesh_generator]
      type = 'RunException'
      input = 'save_in_meshes.i'
      cli_args = "Mesh/A_and_B/save_with_name='C' "
      expect_err = "Cannot use the save in capability with the final mesh generator"

      detail = "The save in capability can not be used on final mesh generator which avoids duplicate mesh output."
    []
  []

    [save_in_independent_mesh]
      requirement = "The system shall save a mesh that is indenpendent from final mesh generator"

      type = 'Exodiff'
      input = 'save_in_meshes_with_C.i'
      exodiff = 'C_in.e'
      recover = false
    []
[]
